# PocketPortal Configuration Example
# ====================================
# Copy this file to .env and fill in your values
# Configuration precedence: Environment Variables > config.yaml > Defaults

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Telegram Bot Configuration
# Get token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_USER_ID=your_telegram_user_id

# LLM Backend Configuration
# Choose one: ollama, lmstudio, mlx
LLM_BACKEND=ollama

# Ollama Configuration (if using LLM_BACKEND=ollama)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_HOST=http://localhost:11434
OLLAMA_MODEL=qwen2.5:7b-instruct-q4_K_M

# =============================================================================
# OPTIONAL: ALTERNATIVE LLM BACKENDS
# =============================================================================

# LM Studio Configuration (if using LLM_BACKEND=lmstudio)
# LMSTUDIO_BASE_URL=http://localhost:1234/v1
# LM_STUDIO_HOST=http://localhost:1234

# MLX Configuration (Apple Silicon only, if using LLM_BACKEND=mlx)
# MLX_MODEL=mlx-community/Qwen2.5-7B-Instruct-4bit

# =============================================================================
# ROUTING & MODEL PREFERENCES
# =============================================================================

# Routing Strategy
# Options: auto, speed, quality, balanced, cost_optimized
ROUTING_STRATEGY=auto
ROUTING_MAX_COST=0.7
VERBOSE_ROUTING=true

# Model Preferences (comma-separated lists)
MODEL_PREF_TRIVIAL=qwen2.5:0.5b,llama3.2:1b
MODEL_PREF_SIMPLE=qwen2.5:3b,llama3.2:3b
MODEL_PREF_MODERATE=qwen2.5:7b,llama3.1:8b
MODEL_PREF_COMPLEX=qwen2.5:14b,llama3.1:8b
MODEL_PREF_EXPERT=qwen2.5:32b,llama3.1:70b
MODEL_PREF_CODE=qwen2.5-coder:7b,deepseek-coder:6.7b

# =============================================================================
# TOOLS & HUMAN-IN-THE-LOOP
# =============================================================================

# Tool Configuration
TOOLS_REQUIRE_CONFIRMATION=true
TOOLS_ADMIN_CHAT_ID=  # Optional: Admin chat for confirmations (uses TELEGRAM_USER_ID if not set)
TOOLS_CONFIRMATION_TIMEOUT=300  # Seconds to wait for confirmation (5 minutes)
MAX_PARALLEL_TOOLS=3

# Browser Automation
BROWSER_HEADLESS=true

# =============================================================================
# SECURITY & RATE LIMITING
# =============================================================================

# Rate Limiting (two formats supported for compatibility)
RATE_LIMIT_MESSAGES=30
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MESSAGES_PER_MINUTE=30
RATE_LIMIT_TOKENS_PER_HOUR=100000

# Sandbox Configuration (Docker-based code execution)
SANDBOX_ENABLED=false
SANDBOX_DOCKER_IMAGE=python:3.11-slim

# =============================================================================
# LOGGING & OBSERVABILITY
# =============================================================================

# Logging Configuration
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT_JSON=false
LOG_ROTATION_ENABLED=true

# Observability & Monitoring
ENABLE_TELEMETRY=false
ENABLE_METRICS=false

# OpenTelemetry (if ENABLE_TELEMETRY=true)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# =============================================================================
# RELIABILITY & WATCHDOG
# =============================================================================

# Watchdog & Auto-Recovery
WATCHDOG_ENABLED=true

# Circuit Breaker (LLM reliability)
CIRCUIT_BREAKER_ENABLED=true

# =============================================================================
# CONTEXT & MEMORY
# =============================================================================

# Memory Configuration
MEMORY_ENABLED=true

# Context Management
# CONTEXT_MAX_MESSAGES=100
# CONTEXT_WINDOW_STRATEGY=sliding

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Configuration Directory (override default ~/.config/pocketportal)
# POCKETPORTAL_CONFIG_DIR=/path/to/config

# Data Directory (override default ./data)
# DATA_DIR=/path/to/data

# Logs Directory (override default ./logs)
# LOGS_DIR=/path/to/logs

# =============================================================================
# NOTES
# =============================================================================
# - Required variables: TELEGRAM_BOT_TOKEN, TELEGRAM_USER_ID, OLLAMA_BASE_URL
# - All other variables have sensible defaults
# - Boolean values: true/false (case-insensitive)
# - Paths can be absolute or relative
# - Environment variables override config.yaml settings
